name = "tetris-battle"
main = "src/index.ts"
compatibility_date = "2024-01-01"
compatibility_flags = ["nodejs_compat"]

# Durable Objects
[[durable_objects.bindings]]
name = "TETRIS_ROOM"
class_name = "TetrisRoom"

[[durable_objects.bindings]]
name = "ONLINE_PRESENCE"
class_name = "OnlinePresence"

[[durable_objects.bindings]]
name = "MATCHMAKING_QUEUE"
class_name = "MatchmakingQueue"

# Migrations for Durable Objects with SQLite storage
[[migrations]]
tag = "v1"
new_sqlite_classes = ["TetrisRoom"]

[[migrations]]
tag = "v2"
new_sqlite_classes = ["OnlinePresence"]

[[migrations]]
tag = "v3"
new_sqlite_classes = ["MatchmakingQueue"]

# CORS settings
[vars]
ALLOWED_ORIGINS = "https://adalabtech.com,http://localhost:3000"
