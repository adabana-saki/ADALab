name = "tetris-battle"
main = "src/index.ts"
compatibility_date = "2024-01-01"
compatibility_flags = ["nodejs_compat"]

# Durable Objects
[[durable_objects.bindings]]
name = "TETRIS_ROOM"
class_name = "TetrisRoom"

[[durable_objects.bindings]]
name = "ONLINE_PRESENCE"
class_name = "OnlinePresence"

[[durable_objects.bindings]]
name = "MATCHMAKING_QUEUE"
class_name = "MatchmakingQueue"

[[durable_objects.bindings]]
name = "TYPING_ROOM"
class_name = "TypingRoom"

[[durable_objects.bindings]]
name = "GAME_2048_ROOM"
class_name = "Game2048Room"

[[durable_objects.bindings]]
name = "SNAKE_ROOM"
class_name = "SnakeRoom"

# Migrations for Durable Objects with SQLite storage
[[migrations]]
tag = "v1"
new_sqlite_classes = ["TetrisRoom"]

[[migrations]]
tag = "v2"
new_sqlite_classes = ["OnlinePresence"]

[[migrations]]
tag = "v3"
new_sqlite_classes = ["MatchmakingQueue"]

[[migrations]]
tag = "v4"
new_sqlite_classes = ["TypingRoom", "Game2048Room", "SnakeRoom"]

# CORS settings
[vars]
ALLOWED_ORIGINS = "https://adalabtech.com,http://localhost:3000"
